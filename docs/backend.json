{
  "entities": {
    "Institution": {
      "title": "Institution",
      "type": "object",
      "description": "Represents an educational institution.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the institution."
        },
        "municipality": {
          "type": "string",
          "description": "Municipality where the institution is located."
        }
      },
      "required": [
        "name",
        "municipality"
      ]
    },
    "Department": {
      "title": "Department",
      "type": "object",
      "description": "Represents a department within an institution.",
      "properties": {
        "institutionId": {
          "type": "string",
          "description": "Reference to Institution. (Relationship: Institution 1:N Department)"
        },
        "name": {
          "type": "string",
          "description": "Name of the department."
        }
      },
      "required": [
        "institutionId",
        "name"
      ]
    },
    "Student": {
      "title": "Student",
      "type": "object",
      "description": "Represents a student.",
      "properties": {
        "firstName": {
          "type": "string",
          "description": "First name of the student."
        },
        "lastName": {
          "type": "string",
          "description": "Last name of the student."
        },
        "dateOfBirth": {
          "type": "string",
          "format": "date",
          "description": "Date of birth of the student."
        },
        "gender": {
          "type": "string",
          "description": "Gender of the student (male/female)."
        },
        "level": {
          "type": "string",
          "description": "The student's grade level (e.g., 'أولى ابتدائي')."
        },
        "institutionId": {
          "type": "string",
          "description": "Reference to Institution."
        },
        "status": {
          "type": "string",
          "enum": [
            "active",
            "exempt"
          ],
          "description": "The student's status (active/exempt)."
        }
      },
      "required": [
        "firstName",
        "lastName",
        "gender",
        "level",
        "institutionId",
        "status"
      ]
    },
    "Attendance": {
      "title": "Attendance",
      "type": "object",
      "description": "Represents the monthly attendance record of a student.",
      "properties": {
        "studentId": {
          "type": "string",
          "description": "Reference to Student."
        },
        "departmentId": {
          "type": "string",
          "description": "Reference to Department."
        },
        "month": {
          "type": "string",
          "description": "The month of the record in 'YYYY-MM' format."
        },
        "records": {
          "type": "object",
          "description": "An object where keys are days of the month and values are the attendance status.",
          "additionalProperties": {
            "type": "string",
            "enum": ["present", "absent", "justified", "no-outfit"]
          }
        }
      },
      "required": [
        "studentId",
        "departmentId",
        "month",
        "records"
      ]
    },
    "EvaluationCriteria": {
      "title": "EvaluationCriteria",
      "type": "object",
      "description": "Represents criteria used for evaluating students.",
      "properties": {
        "name": {
          "type": "string",
          "description": "Name of the evaluation criteria (e.g., Skill, Behavior, Participation)."
        },
        "weight": {
          "type": "number",
          "description": "Weight of the evaluation criteria."
        }
      },
      "required": [
        "name",
        "weight"
      ]
    },
    "Grade": {
      "title": "Grade",
      "type": "object",
      "description": "Represents a student's grade for a specific evaluation criteria.",
      "properties": {
        "studentId": {
          "type": "string",
          "description": "Reference to Student. (Relationship: Student 1:N Grade)"
        },
        "evaluationCriteriaId": {
          "type": "string",
          "description": "Reference to EvaluationCriteria. (Relationship: EvaluationCriteria 1:N Grade)"
        },
        "grade": {
          "type": "number",
          "description": "The grade value."
        }
      },
      "required": [
        "studentId",
        "evaluationCriteriaId",
        "grade"
      ]
    },
    "ProfessorProfile": {
      "title": "ProfessorProfile",
      "type": "object",
      "description": "Stores the professor's technical card information.",
      "properties": {
        "lastName": {
          "type": "string"
        },
        "firstName": {
          "type": "string"
        },
        "dateOfBirth": {
          "type": "string",
          "format": "date"
        },
        "placeOfBirth": {
          "type": "string"
        },
        "maritalStatus": {
          "type": "string"
        },
        "address": {
          "type": "string"
        },
        "phoneNumber": {
          "type": "string"
        },
        "email": {
          "type": "string",
          "format": "email"
        },
        "rank": {
          "type": "string"
        },
        "title": {
          "type": "string"
        },
        "appointmentDate": {
          "type": "string",
          "format": "date"
        },
        "confirmationDate": {
          "type": "string",
          "format": "date"
        },
        "grade": {
          "type": "string"
        },
        "certificateName": {
          "type": "string"
        },
        "certificateNumber": {
          "type": "string"
        },
        "specialization": {
          "type": "string"
        },
        "issuingInstitution": {
          "type": "string"
        },
        "certificationDate": {
          "type": "string",
          "format": "date"
        },
        "wilaya": {
          "type": "string",
          "description": "The wilaya (province/state) for the institution."
        },
        "schoolName": {
          "type": "string",_
          "description": "The name of the school."
        },
        "schoolYear": {
          "type": "string",
          "description": "The current school year (e.g., 2023-2024)."
        }
      }
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "/institutions/{institutionId}": {
      "schema": {
        "$ref": "#/backend/entities/Institution"
      },
      "description": "Stores institution data. No authentication is needed."
    },
    "/departments/{departmentId}": {
      "schema": {
        "$ref": "#/backend/entities/Department"
      },
      "description": "Stores department data.  No authentication is needed."
    },
    "/students/{studentId}": {
      "schema": {
        "$ref": "#/backend/entities/Student"
      },
      "description": "Stores student data. No authentication is needed."
    },
    "/attendances/{attendanceId}": {
      "schema": {
        "$ref": "#/backend/entities/Attendance"
      },
      "description": "Stores attendance records. The ID is a composite of studentId and month (yyyy-MM)."
    },
    "/evaluation_criteria/{evaluationCriteriaId}": {
      "schema": {
        "$ref": "#/backend/entities/EvaluationCriteria"
      },
      "description": "Stores evaluation criteria. No authentication is needed."
    },
    "/grades/{gradeId}": {
      "schema": {
        "$ref": "#/backend/entities/Grade"
      },
      "description": "Stores grades. No authentication is needed."
    },
    "/professor_profile/{profileId}": {
      "schema": {
        "$ref": "#/backend/entities/ProfessorProfile"
      },
      "description": "Stores the professor's profile data. Authentication might be required."
    }
  }
}
