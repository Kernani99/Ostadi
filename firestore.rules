/**
 * @fileoverview Firestore Security Rules for the STAPS Manager application.
 *
 * Core Philosophy:
 * This ruleset configures a public-read, public-write database. Since the application lacks any user authentication,
 * all data is accessible to everyone.
 *
 * Data Structure:
 * - /institutions/{institutionId}: Stores institution data.
 * - /departments/{departmentId}: Stores department data.
 * - /students/{studentId}: Stores student data.
 * - /attendances/{attendanceId}: Stores attendance records.
 * - /evaluation_criteria/{evaluationCriteriaId}: Stores evaluation criteria.
 * - /grades/{gradeId}: Stores grades.
 *
 * Key Security Decisions:
 * - No user authentication is used, therefore all data read and write operations are open to the public.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows anyone to read and write institution data.
     * @path /institutions/{institutionId}
     * @allow (get, list)
     * @allow (create, update, delete)
     * @principle Allows open access to institution data.
     */
    match /institutions/{institutionId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows anyone to read and write department data.
     * @path /departments/{departmentId}
     * @allow (get, list)
     * @allow (create, update, delete)
     * @principle Allows open access to department data.
     */
    match /departments/{departmentId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows anyone to read and write student data.
     * @path /students/{studentId}
     * @allow (get, list)
     * @allow (create, update, delete)
     * @principle Allows open access to student data.
     */
    match /students/{studentId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows anyone to read and write attendance data.
     * @path /attendances/{attendanceId}
     * @allow (get, list)
     * @allow (create, update, delete)
     * @principle Allows open access to attendance data.
     */
    match /attendances/{attendanceId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows anyone to read and write evaluation criteria data.
     * @path /evaluation_criteria/{evaluationCriteriaId}
     * @allow (get, list)
     * @allow (create, update, delete)
     * @principle Allows open access to evaluation criteria data.
     */
    match /evaluation_criteria/{evaluationCriteriaId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows anyone to read and write grade data.
     * @path /grades/{gradeId}
     * @allow (get, list)
     * @allow (create, update, delete)
     * @principle Allows open access to grade data.
     */
    match /grades/{gradeId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }
  }
}